<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapport de Stage | SFC Solutions</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>

    <nav>
        <div class="nav-container">
            <div class="logo">Portfolio</div>
            
            <div class="nav-links" style="display: flex; align-items: center;">
                <a href="index.html">CV / Accueil</a>
                
                <div class="dropdown">
                    <button class="dropbtn active-drop">Stage ‚ñæ</button>
                    <div class="dropdown-content">
                        <a href="stage1.html" style="color: var(--accent);">1√®re ann√©e</a>
                        <a href="stage2.html">2√®me ann√©e</a>
                    </div>
                </div>

                <a href="veille.html">Veille</a>

                <div class="dropdown">
                    <a href="rectorat.html" class="dropbtn">Rectorat ‚ñæ</a>
                    <div class="dropdown-content">
                        <a href="E5.html">E5</a>
                        <a href="E6.html">E6</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 class="page-title">Rapport de Stage <br><span>SFC Solutions</span>.</h1>

        <div class="bento-grid">
            
            <div class="card col-12">
                <span class="date">Du 26/05/2025 au 27/06/2025</span>
                <div style="display: flex; justify-content: space-between; align-items: start; gap: 40px; flex-wrap: wrap;">
                    <div style="flex: 1;">
                        <h2>L'Entreprise : SFC Solutions Automotive France</h2>
                        <p>SFC Solutions est une SAS (Soci√©t√© par Actions Simplifi√©e), experte dans le d√©veloppement et la fabrication de syst√®mes d‚Äô√©tanch√©it√© pour le secteur automobile.</p>
                        <p style="margin-top: 10px; color: var(--text-muted);">
                            <strong>Mission :</strong> Assurer la protection des v√©hicules (bruit, poussi√®re, eau).<br>
                            Membre d‚ÄôAmaneos, acteur mondial de l‚Äôindustrie automobile.
                        </p>
                    </div>
                    <div style="background: #fff; padding: 10px; border-radius: 8px; width: 200px; display: flex; align-items: center; justify-content: center;">
                        <img src="images/logo_stage.png" alt="Logo SFC Solutions" style="width: 100%; border: none; margin: 0;">
                    </div>
                </div>
            </div>

            <div class="card col-12">
                <h2>Le Projet HSE (Hygi√®ne S√©curit√© Environnement)</h2>
                <p style="font-size: 1.1rem; color: #fff; margin-bottom: 15px;"><strong>Objectif :</strong> Mettre en place un suivi des flux de d√©chets sur le site Transi√®res en France via Power BI.</p>
                <div style="margin-top: 10px; border-top: 1px solid var(--border); padding-top: 15px;">
                    <p class="date">Types de d√©chets suivis :</p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <span class="badge">D√©chets de boudinage</span>
                        <span class="badge">D√©chets techniques</span>
                        <span class="badge">D√©chets produits finis</span>
                        <span class="badge">Caoutchouc d√©class√©</span>
                        <span class="badge">M√©taux</span>
                    </div>
                </div>
            </div>

            <div class="card col-12">
                <h2>Environnement Technique</h2>
                <ul style="list-style: none; margin-top: 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <li style="border-left: 2px solid var(--accent); padding-left: 10px;">
                        üíª <strong>Mat√©riel :</strong><br> PC Portable DELL + √âcran
                    </li>
                    <li style="border-left: 2px solid var(--accent); padding-left: 10px;">
                        üóÑÔ∏è <strong>Serveur :</strong><br> Distant (Datawarehouse)
                    </li>
                    <li style="border-left: 2px solid var(--accent); padding-left: 10px;">
                        üíæ <strong>SGBD :</strong><br> SQL Server
                    </li>
                    <li style="border-left: 2px solid var(--accent); padding-left: 10px;">
                        üîÑ <strong>ETL :</strong><br> Talend Open Studio
                    </li>
                    <li style="border-left: 2px solid var(--accent); padding-left: 10px;">
                        üìä <strong>Visualisation :</strong><br> Power BI Desktop
                    </li>
                </ul>
            </div>

            <div class="card col-12">
                <h2>Planning Pr√©visionnel</h2>
                <img src="images/planning_previsionnel.png" alt="Planning Pr√©visionnel" style="width: 100%; height: auto; border: none;">
            </div>

            <div class="card col-12">
                <h2>1. Connexion & ETL (Talend)</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div class="timeline-item">
                        <span class="date">√âtape 1 : Connexion Serveur</span>
                        <p>Acc√®s au serveur Datawarehouse.</p>
                        <img src="images/connexion_serveur.png" alt="Connexion Serveur">
                    </div>
                    <div class="timeline-item">
                        <span class="date">√âtape 2 : Nettoyage (Talend)</span>
                        <p>Construction du Job ETL :</p>
                        <ul style="font-size: 0.9rem; margin-top: 10px; color: #ccc;">
                            <li>‚Ä¢ <strong>Prejobs :</strong> Connexion BDD + Envoi d'e-mail.</li>
                            <li>‚Ä¢ <strong>tDBinput_1 :</strong> Lecture sources.</li>
                            <li>‚Ä¢ <strong>tMap :</strong> Nettoyage et transformation.</li>
                            <li>‚Ä¢ <strong>tDBoutput2 :</strong> Injection cible.</li>
                            <li>‚Ä¢ <strong>Postjobs :</strong> D√©connexion + Confirmation.</li>
                        </ul>
                        <img src="images/job_talend.png" alt="Job Talend ETL">
                    </div>
                </div>
            </div>

            <div class="card col-12">
                <h2>2. SQL & Visualisation</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div class="timeline-item">
                        <span class="date">√âtape 3 : Requ√™te SQL</span>
                        <p>Cr√©ation d'une vue SQL massive regroupant toutes les tables et vues n√©cessaires.</p>
                        
                        <span class="badge clickable-badge" style="margin-top: 10px;" onclick="openSqlModal()">üìÑ Voir la Requ√™te SQL Complexe</span>
                    </div>

                    <div class="timeline-item">
                        <span class="date">√âtape 4 : Power BI (Mod√©lisation)</span>
                        <p>Liaison de la vue SQL avec Power BI Desktop.</p>
                        <img src="images/powerbi_liaison.png" alt="Liaison Power BI">
                    </div>

                    <div class="timeline-item">
                        <span class="date">√âtape 5 : DAX & Colonnes</span>
                        <p>Cr√©ation de colonnes calcul√©es via le langage DAX.</p>
                        <div style="display: grid; gap: 10px;">
                            <img src="images/formule_dax1.png" alt="Formule DAX">
                            <img src="images/formule_dax2.png" alt="R√©sultat colonnes">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card col-12">
                <h2>R√©sultat Final</h2>
                <p>Cr√©ation compl√®te de 6 pages de rapport.</p>
                <img src="images/powerbi_pages.png" alt="Barre de pages Power BI" style="width: 100%; margin-bottom: 15px;">
                <img src="images/powerbi_finale.png" alt="Dashboard Final Power BI" style="width: 100%;">
            </div>

            <div class="card col-12">
                <h2>Comp√©tences D√©velopp√©es (BTS SIO)</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: var(--surface-hover); padding: 15px; border-radius: 8px;">
                        <span class="date">B1.1 G√©rer le patrimoine</span>
                        <ul style="list-style: none; font-size: 0.9rem;">
                            <li>‚úÖ Exploiter des r√©f√©rences, normes et standards</li>
                            <li>‚úÖ Recenser et identifier les ressources num√©riques</li>
                        </ul>
                    </div>
                    <div style="background: var(--surface-hover); padding: 15px; border-radius: 8px;">
                        <span class="date">B1.2 R√©pondre aux incidents</span>
                        <ul style="list-style: none; font-size: 0.9rem;">
                            <li>‚úÖ Traiter des demandes concernant les services r√©seau et syst√®mes applicatifs</li>
                        </ul>
                    </div>
                    <div style="background: var(--surface-hover); padding: 15px; border-radius: 8px;">
                        <span class="date">B1.4 Travailler en mode projet</span>
                        <ul style="list-style: none; font-size: 0.9rem;">
                            <li>‚úÖ Planifier les activit√©s</li>
                            <li>‚úÖ √âvaluer les indicateurs de suivi et analyser les √©carts</li>
                        </ul>
                    </div>
                    <div style="background: var(--surface-hover); padding: 15px; border-radius: 8px;">
                        <span class="date">B1.5 Service informatique</span>
                        <ul style="list-style: none; font-size: 0.9rem;">
                            <li>‚úÖ D√©ployer un service</li>
                            <li>‚úÖ Accompagner les utilisateurs dans la mise en place</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div id="sqlModal" class="modal">
        <div class="modal-content-sql">
            <span class="close" onclick="closeSqlModal()">&times;</span>
            <h3 style="color: var(--accent); margin-bottom: 15px;">Vue SQL : Gestion_Dechets</h3>
            <pre><code class="language-sql">
CREATE VIEW [CLSEALYNX].[Gestion_Dechets]

AS

SELECT [site]

, [Date_controle]
, [article]
, [designation]
, [vehicule]
, [type_stock]
, [unite]
, SUM([quantite]) as 'quantite'
, SUM([montant]) as 'montant'
, [famille_mouvement]
, [famille_mouvement_sortie]
, SUM([quantite_dechet_valorise]) as 'quantite_dechet_valorise'
, [categorie_article]
, CASE
WHEN atelier = 'A15' THEN 'FIFR1'
WHEN atelier = 'A27' THEN 'FIFR1'
WHEN atelier = 'A38' THEN 'FIFR1'
WHEN atelier = 'A40' THEN 'FIFR1'
WHEN atelier = 'A45' THEN 'FIFR1'
WHEN atelier = 'A50' THEN 'FIFR1'
WHEN atelier = 'FIFR1' THEN 'FIFR1'     --Regroupement des anciens ateliers
WHEN atelier = 'A33' THEN 'EXFR1'       --sous le nom des nouveaux
WHEN atelier = 'A70' THEN 'EXFR1'
WHEN atelier = 'A14' THEN 'EXFR1'
WHEN atelier = 'A42' THEN 'EXFR1'
WHEN atelier = 'A01' THEN 'EXFR1'
WHEN atelier = 'EXFR1' THEN 'EXFR1'
WHEN atelier = 'A20' THEN 'MEFR1'
WHEN atelier = 'MEFR1' THEN 'MEFR1'
WHEN atelier = 'A16' THEN 'Protos'
ELSE 'Autre' END [atelier]
, [famille]
, [famille_intitule]
, CASE
WHEN [quantite_dechet_valorise] > 0 THEN SUM([poids] * [quantite_dechet_valorise])
ELSE SUM([poids] * [quantite])
END [poids]
FROM
(
SELECT [Site_controle] as 'site'
, [Date_controle]
, [Article] as 'article'
, [Designation] as 'designation'
, [Vehicule] as 'vehicule'
, [type_stock]
, [Cause_FRA]
, [unite]
, [Quantite] as 'quantite'
, [Montant_devise_controle] as 'montant'
, [Devise_controle] as devise
, [Date_production]
, 'REQ' [famille_mouvement]
, 'REQ' [famille_mouvement_sortie]
, 0 [quantite_dechet_valorise]
, '' [categorie_article]
, [atelier_production] as 'atelier'
, [famille]
, [famille_intitule]
, [poids_piece] [poids] as 'poids'
 FROM CLSEALYNX.Rebuts_qualite
 WHERE Rebuts_qualite.[Site_controle] = 'FR1'

UNION ALL   --Concat√©nation des enregistrements des 3 Vues

SELECT [site]
, [date] [Date_controle]
, [article]
, [designation]
, [vehicule]
, [type_stock]
, 'Consommation' [Cause_FRA]
, [unite]
, [quantite] as 'quantite'  
, [montant] as 'montant'  
, [devise]
, [date] as 'Date_production'
, [famille_mouvement]
, [famille_mouvement_sortie]
, 0 [quantite_dechet_valorise]
, [categorie_article]
, [atelier]
, [famille]
, [famille_intitule]
, [poids_piece] [poids] as 'poids'

 FROM CLSEALYNX.consommation_brute_historique

 WHERE consommation_brute_historique.[famille_mouvement] not in('PRO', 
'PROR', 'QUA') AND consommation_brute_historique.[site] = 'FR1'

UNION ALL   --Concat√©nation des enregistrements des 3 Vues

SELECT [site]
, [date] as 'Date_controle'
, [article]
, [designation]
, [vehicule]
, [type_stock]
, 'Consommation' [Cause_FRA]
, [unite]
, [quantite_dechet] as 'quantite'
, [montant_dechet] as 'montant'
, '' [devise]
, [date] [Date_production]
, CASE WHEN quantite_dechet_valorise > 0 THEN 'REV' ELSE 'RED' END [famille_mouvement]
, CASE WHEN quantite_dechet_valorise > 0 THEN 'REV' ELSE 'RED' END [famille_mouvement_sortie]
, [quantite_dechet_valorise]
, '' [categorie_article]
, [atelier]
, '020' [famille]
, 'M√©langes fabriqu√©s' [famille_intitule]
, [poids]

 FROM CLSEALYNX.production_brute_historique

 WHERE production_brute_historique.[site] = 'FR1' AND 
(production_brute_historique.[quantite_dechet] > 0 OR 
quantite_dechet_valorise > 0)

 ) unions

 WHERE Date_controle > '2025-01-01'
 GROUP BY [site]        --Limitation du nombre de lignes

 , [Date_controle]
 , [article]
 , [designation]
 , [vehicule]
 , [type_stock]
 , [unite]
 , [quantite]
 , [montant]
 , [famille_mouvement]
 , [famille_mouvement_sortie]
 , [quantite_dechet_valorise]
 , [categorie_article]
 , [atelier]
 , [famille]
 , [famille_intitule]
 , [poids]
            </code></pre>
        </div>
    </div>
    
    <script src="script.js"></script>

    <footer>
        ¬© 2025 Enzo VINCENT - Portfolio
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
</body>
</html>